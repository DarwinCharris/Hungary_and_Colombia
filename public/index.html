<!DOCTYPE html>
<html lang="es">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Pagina de inicio</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet"
    integrity="sha384-T3c6CoIi6uLrA9TneNEoa7RxnatzjcDSCmG1MXxSR1GAsXEV/Dwwykc2MPK8M2HN" crossorigin="anonymous">
  <style>
    #error-password:empty {
      display: none;
    }
  </style>
</head>

<body>
  <div class="container">

    <div class="col-md-8">
      <div class="position-absolute top-50 start-25 translate-middle">
        <img src="./images/Logo.png" class="rounded mx-auto d-block" alt="logo" height="400" width="400">
      </div>

    </div>
    <div class="col-md-4">
      <div class="position-absolute top-50 start-50 translate-middle">
        <h1>Institución Educativa SABIDURÍA</h1>
        <div class="row ">
          <div class="col-md-8 mx-5">
            <form>
              <label for="mail" class="form-label">Usuario:</label>
              <input id="mail" type="text" class="form-control" required>
              <label for="password" class="form-label">Contraseña:</label>
              <input id="password" type="password" class="form-control my-2" required>
              <div id="error-password"></div>
              <div class="d-grid gap-2 col-6 mx-auto">
                <button id="send" class="btn btn-primary" type="button">Entrar</button>
                <button type="button" class="btn btn-link" onclick="registro()">Registrate</button>
              </div>
            </form>
          </div>
        </div>
      </div>
      <div class="position-absolute top-100 start-0">
        <button type="button" class="btn btn-link" onclick="administrador()">Acceso de administrador</button>

      </div>
    </div>


  </div>
  <script type="text/javascript" language="javascript" src="https://code.jquery.com/jquery-3.5.1.js"></script>
  <script type="text/javascript" language="javascript"
    src="https://cdn.datatables.net/1.10.22/js/jquery.dataTables.min.js"></script>
  <script type="text/javascript" language="javascript"
    src="https://cdn.datatables.net/1.10.22/js/dataTables.bootstrap5.min.js"></script>
  <script>

    function registro() {
      window.location.href = "registro.html";
    }
    function administrador() {
      //Página de administrador
      window.location.href = "administrador.html";
    }

    $('#send').on('click', function () {
      var url = 'http://localhost:3000/api/login-aspirante';
      $.ajax({
        url: url,
        method: 'GET',
        contentType: 'application/json', // Especifica el tipo de contenido
        data: {
          mail: $('#mail').val(),
          password: $('#password').val()
        },
        success: function (response) {
          console.log(response);
          if (response.message === 'Correct') {
            if (response.status == 1) {
              window.location.href = 'principal_aspirante.html?status=' +
                response.status + '&cod=' + response.cod
            }else{
              window.location.href = 'radicados.html?cod=' + response.cod
            }

          } else {
            document.getElementById('error-password').innerHTML = response.message
          }
        },
        error: function (error) {

          document.getElementById('error-password').innerHTML = "Error en el servidor"
        }
      });
    });
  </script>

</body>

</html>